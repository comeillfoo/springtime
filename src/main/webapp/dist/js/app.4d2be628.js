(function(e){function t(t){for(var r,a,i=t[0],c=t[1],l=t[2],d=0,h=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},s={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0968":function(e,t,n){},2125:function(e,t,n){},"2c2c":function(e,t,n){},"3eb7":function(e,t,n){"use strict";n("0968")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("logo"),e.isAuthorized?n("basic",{attrs:{access:e.accessTokenName,refresh:e.refreshTokenName}}):n("startup",{attrs:{access:e.accessTokenName,refresh:e.refreshTokenName}}),e.isAuthorized?e._e():n("hat"),n("basement")],1)},o=[],a=(n("7014"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{attrs:{id:"logo"}},[n("div",{attrs:{id:"logo_box"}},[n("h3",[e._v("dots among the area")])]),n("div",{attrs:{id:"logo_btn_panel"}},[n("div",{attrs:{id:"logo_btn"}})])])}],c=(n("c5b8"),n("2877")),l={},u=Object(c["a"])(l,a,i,!1,null,null,null),d=u.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"startup"}},[n("loging",{attrs:{access:e.access,refresh:e.refresh}})],1)},g=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"hat"}},[e._l(e.authors,(function(e){return[n("author",{attrs:{name:e.name,surname:e.surname,group:e.group,variant:e.variant,imageURL:e.imageURL,profileLink:e.profileLink}})]}))],2)},p=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"author"}},[n("a",{attrs:{href:e.profileLink}},[n("div",{staticClass:"author-logo"},[n("img",{attrs:{src:e.imageURL,width:"100%"}})]),n("div",{staticClass:"author-info"},[n("h3",{staticClass:"text__title"},[e._v(e._s(e.name)+" "+e._s(e.surname))]),n("h4",{staticClass:"text__subtitle"},[e._v("группа: "+e._s(e.group)+" "),n("br"),e._v(" вариант: "+e._s(e.variant))])])])])},m=[],w={name:"author",props:["name","surname","group","variant","imageURL","profileLink"]},b=w,x=(n("d487"),Object(c["a"])(b,v,m,!1,null,null,null)),k=x.exports,y={name:"hat",data:function(){return{authors:[{name:"Ленар",surname:"Ханнанов",group:"P3214",variant:"2599",imageURL:"https://avatars0.githubusercontent.com/u/55162739?s=400&u=3c4b18db132cb3f15d9ce43fd39b40ffcc72949c&v=4",profileLink:"https://github.com/Come1LLF00"},{name:"Антон",surname:"Сушкевич",group:"P3214",variant:"2599",imageURL:"https://avatars3.githubusercontent.com/u/58341402?s=400&u=16c83f565161eab46f41869a47fa1e71565ac53d&v=4",profileLink:"https://github.com/Leargy"}]}},components:{author:k}},_=y,T=(n("c021"),Object(c["a"])(_,f,p,!1,null,null,null)),S=T.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"loging"}},[n("div",{attrs:{id:"login-form"}},[n("fieldset",[n("label",[e._v("логин")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.login,expression:"user.login"}],attrs:{type:"text",placeholder:"dissya",title:"имя пользователя",required:"true",autocomplete:"username"},domProps:{value:e.user.login},on:{input:function(t){t.target.composing||e.$set(e.user,"login",t.target.value)}}})]),n("fieldset",[n("label",[e._v("пароль")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"qwerty1234",title:"пароль",required:"true",autocomplete:"current-password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),n("a",{attrs:{id:"err_message"}}),n("fieldset",{staticClass:"separated"},[n("button",{staticClass:"btn",attrs:{title:"Кнопка для входа в существующий аккаунт",disabled:e.isNotFilled},on:{click:e.signin}},[e._v("Войти")]),n("button",{staticClass:"btn",attrs:{title:"Кнопка для создания нового аккаунта",disabled:e.isNotFilled},on:{click:e.signup}},[e._v("Зарегистрироваться")])])])])},R=[],j=(n("a4d3"),n("e01a"),n("d3b7"),n("96cf"),n("1da1")),O={name:"loging",props:["access","refresh"],data:function(){return{user:{login:"",password:""},minPasswordLength:8,queries:{signin:"api/aunt/sign_in",register:"api/aunt/register"}}},computed:{isNotFilled:function(){return!(void 0!==this.user.login&&null!==this.user.login&&void 0!==this.user.password&&null!==this.user.password&&this.user.login.length>0&&this.user.password.length>=this.minPasswordLength)}},methods:{createMessage:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.error(t),n=document.getElementById("err_message"),n.innerText=t;case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),signin:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("sign in account:"),console.log("user: ".concat(this.user)),console.log("fetching tokens from server..."),e.next=5,fetch(this.queries.signin,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.user)});case 5:return n=e.sent,r=null,e.prev=7,e.next=10,n.json();case 10:r=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e["catch"](7),console.error(e.t0),e.abrupt("return");case 17:console.log("check if response is ok (200)"),n.ok?(console.log("response 200; get token"),console.log("response body: ".concat(r)),r?(console.log("got user access-token"),console.log("got user refresh-token"),this.$session.set(this.access,r.accessToken),this.$session.set(this.refresh,r.refreshToken),window.location.reload()):(console.log("bad data: expected { accessToken, refreshToken }"),this.createMessage("*".concat(r)))):this.createMessage("*".concat(r.description));case 19:case"end":return e.stop()}}),e,this,[[7,13]])})));function t(t){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("sign up new account:"),console.log("user: ".concat(this.user)),console.log("fetching tokens from server..."),e.next=5,fetch(this.queries.register,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.user)});case 5:return n=e.sent,console.log("sent request"),console.log("check if status 201"),r=null,e.prev=9,e.next=12,n.json();case 12:r=e.sent,e.next=19;break;case 15:return e.prev=15,e.t0=e["catch"](9),console.error(e.t0),e.abrupt("return");case 19:201===n.status?(console.log("user created"),console.log("response body: ".concat(JSON.stringify(r))),r?(console.log("got user access-token"),console.log("get user refresh-token"),this.$session.set(this.access,r.accessToken),this.$session.set(this.refresh,r.refreshToken),window.location.reload()):console.log("bad data: expected { accessToken, refreshToken }")):this.createMessage("*".concat(r.description));case 20:case"end":return e.stop()}}),e,this,[[9,15]])})));function t(t){return e.apply(this,arguments)}return t}()}},$=O,P=(n("3eb7"),Object(c["a"])($,N,R,!1,null,null,null)),C=P.exports,L={name:"startup",props:["access","refresh"],components:{hat:S,loging:C}},A=L,E=(n("c0b1"),Object(c["a"])(A,h,g,!1,null,null,null)),z=E.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"basic"}},[n("div",{attrs:{id:"top-container"}},[n("div",{staticClass:"inlines__align--center",attrs:{id:"area-container"}},[n("div",{attrs:{id:"area-subcontainer"}},[n("canvas",{ref:"area",attrs:{id:"area",width:"600",height:"600"},on:{click:e.checkArea}},[e._v(" Canvas not supported ")])])]),n("div",{attrs:{id:"form-container"}},[n("form",{attrs:{id:"result"}},[n("fieldset",{ref:"x",attrs:{title:"Значение параметра x должно быть целым числом в пределах -4 до 4"}},[n("label",[e._v("x")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.result.x,expression:"result.x"}],attrs:{required:"true"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.result,"x",t.target.multiple?n:n[0])}}},e._l(e.xValues,(function(t){return n("option",[e._v(e._s(t))])})),0)]),n("fieldset",{ref:"y",attrs:{title:"Значение параметра y должно быть действительным число в интервале от -5 до 5"}},[n("label",[e._v("y")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.result.y,expression:"result.y"}],attrs:{type:"text",placeholder:"y in (-5, 5)",required:"true"},domProps:{value:e.result.y},on:{input:function(t){t.target.composing||e.$set(e.result,"y",t.target.value)}}})]),n("fieldset",{ref:"r",attrs:{title:"Значение параметра r должно быть целым числом в пределах от 1 до 4"}},[n("label",[e._v("r")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.result.r,expression:"result.r"}],attrs:{required:"true"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.result,"r",t.target.multiple?n:n[0])}}},e._l(e.xValues,(function(t){return n("option",[e._v(e._s(t))])})),0)]),n("fieldset",{staticClass:"inlines__align--center"},[n("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.check(t)}}},[e._v("проверить")])])])])]),e.isLoading?n("loader"):e.results.length?n("resultscontainer",{attrs:{results:e.results}}):n("p",{staticClass:"empty-results"},[e._v("результаты отсутствуют")])],1)},M=[],q=(n("99af"),n("cb29"),n("caad"),n("a9e3"),n("35b3"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"resultscontainer"}},[n("table",{attrs:{id:"results"}},[e._m(0),n("tbody",{staticClass:"table__body"},e._l(e.results,(function(t){return n("tr",[n("td",[n("div",{staticClass:"scrollable"},[e._v(e._s(t.x))])]),n("td",{staticClass:"special-width"},[n("div",{staticClass:"scrollable special-width"},[e._v(e._s(t.y))])]),n("td",[n("div",{staticClass:"scrollable"},[e._v(e._s(t.r))])]),n("td",[n("div",{staticClass:"scrollable"},[e._v(e._s(t.hit?"yes":"no"))])])])})),0)])])}),H=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"table__head"},[n("tr",[n("th",[e._v("x")]),n("th",[e._v("y")]),n("th",[e._v("r")]),n("th",[e._v("результат")])])])}],F={name:"resultscontainer",props:["results"],data:function(){return{dateOptions:{localeMatcher:"best fit",hour12:!1,formatMatcher:"best fit",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}}}},J=F,I=(n("ebbf"),Object(c["a"])(J,q,H,!1,null,null,null)),U=I.exports,B=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},D=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"loader"}},[n("div",{staticClass:"lds-facebook"},[n("div"),n("div"),n("div")])])}],X=(n("f482"),{}),Y=Object(c["a"])(X,B,D,!1,null,null,null),Q=Y.exports,G=["1","2","3","4"],K=Math.max.apply(Math,G),W=.45,Z={name:"basic",components:{resultscontainer:U,loader:Q},props:["access","refresh"],data:function(){return{rValues:G,xValues:["-4","-3","-2","-1","0"].concat(G),yMinimal:"-5",yMaximum:"5",result:{x:"",y:"",r:""},results:[],isLoading:!0,queries:{add:"/main/app/add",refresh:"/api/refresh/token",retrieve:"/main/app/dots/all"},counter:4}},computed:{radius:function(){return this.result.r},isNotChecked:function(){return!(void 0!==this.result.x&&null!==this.result.x&&this.result.x.length>0&&void 0!==this.result.y&&null!==this.result.y&&this.result.y.length>0&&void 0!==this.result.r&&null!==this.result.r&&this.result.r.length>0)}},methods:{translateTo:function(e,t,n,r){return console.log("length: ".concat(n,", real coordinate: ").concat(e,", field size: ").concat(t,", proportion: ").concat(r)),n*(e-t/2)/(t*r)},translateFrom:function(e,t,n,r){return t*(e*r/n+.5)},drawRectangle:function(e,t,n,r){e.fillRect(t-r,n,r,r/2)},drawTriangle:function(e,t,n,r){e.beginPath(),e.moveTo(t,n),e.lineTo(t,n-r),e.lineTo(t+r/2,n),e.closePath(),e.stroke(),e.fill()},drawQuadrant:function(e,t,n,r){e.beginPath(),e.arc(t,n,r/2,0,Math.PI/2,!1),e.lineTo(t,n),e.closePath(),e.stroke(),e.fill()},drawArea:function(e,t,n,r,s){t.strokeStyle="#3399FF",t.fillStyle="#3399FF",console.log("canvas: ".concat(e,", ctx: ").concat(t,", x: ").concat(n,", y: ").concat(r,", radius: ").concat(s)),console.log("drawing rectangle"),this.drawRectangle(t,n,r,s),console.log("drawing triangle"),this.drawTriangle(t,n,r,s),console.log("drawing quadrant"),this.drawQuadrant(t,n,r,s)},drawVerticalLine:function(e,t,n,r){e.fillRect(t,n,2,r)},drawHorizontalLine:function(e,t,n,r){e.fillRect(t,n,r,2)},drawLines:function(e,t,n,r){e.strokeStyle="#000000",e.fillStyle="#000000",console.log("draw horizontal line"),this.drawHorizontalLine(e,0,n,r),console.log("draw vertical line"),this.drawVerticalLine(e,t,0,r)},drawHorizontalArrow:function(e,t,n,r){e.beginPath(),e.moveTo(t,n),e.lineTo(t-r,n-r/2),e.lineTo(t-r,n+r/2),e.closePath(),e.fill(),e.stroke()},drawSignedHorizontalArrow:function(e,t,n,r,s){e.fillText(s,t-r,n-r),this.drawHorizontalArrow(e,t,n,r)},drawVerticalArrow:function(e,t,n,r){e.beginPath(),e.moveTo(t,n),e.lineTo(t-r/2,n+r),e.lineTo(t+r/2,n+r),e.closePath(),e.fill(),e.stroke()},drawSignedVerticalArrow:function(e,t,n,r,s){e.fillText(s,t+r,n+r),this.drawVerticalArrow(e,t,n,r)},drawArrows:function(e,t,n,r){e.strokeStyle="#000000",e.fillStyle="#000000",console.log("drawing horizontal arrow"),this.drawHorizontalArrow(e,t,0,r),console.log("drawing vertical arrow"),this.drawVerticalArrow(e,2*t,n,r)},drawSignedArrows:function(e,t,n,r){e.strokeStyle="#000000",e.fillStyle="#000000",console.log("drawing signed horizontal arrow"),this.drawSignedHorizontalArrow(e,2*t,n,r,"x"),console.log("drawing signed vertical arrow"),this.drawSignedVerticalArrow(e,t,0,r,"y")},drawSignedHorizontalNotch:function(e,t,n,r,s){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillText(s,t+r,n+r/2),this.drawHorizontalLine(e,t-r/2,n,r)},drawSignedVerticalNotch:function(e,t,n,r,s){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillText(s,t-r,n-r),this.drawVerticalLine(e,t,n-r/2,r)},tempdraw:function(e){console.log("drawing template");var t=this.$refs.area,n=t.getContext("2d"),r=t.width,s=t.height,o=r*W;console.log("canvas: (".concat(r,":").concat(s,")"));var a="sans-serif",i=r/38;n.font="".concat(i,"px ").concat(a),console.log("clearing canvas"),n.clearRect(0,0,r,s),console.log("drawing working area"),this.drawArea(t,n,r/2,s/2,o),console.log("drawing coordinate lines"),this.drawLines(n,r/2,s/2,r),console.log("drawing direction arrows"),this.drawSignedArrows(n,r/2,s/2,o/20),console.log("drawing notches"),console.log("drawing horizontal notches"),this.drawSignedHorizontalNotch(n,r/2,s/2+o,o/20,"-R"),this.drawSignedHorizontalNotch(n,r/2,s/2+o/2,o/20,"-R/2"),this.drawSignedHorizontalNotch(n,r/2,s/2-o/2,o/20,"R/2"),this.drawSignedHorizontalNotch(n,r/2,s/2-o,o/20,"R"),console.log("drawing vertical notches"),this.drawSignedVerticalNotch(n,r/2-o,s/2,o/20,"-R"),this.drawSignedVerticalNotch(n,r/2-o/2,s/2,o/20,"-R/2"),this.drawSignedVerticalNotch(n,r/2+o/2,s/2,o/20,"R/2"),this.drawSignedVerticalNotch(n,r/2+o,s/2,o/20,"R"),console.log("template drew")},basedraw:function(e){console.log("drawing with real radius");var t=this.$refs.area,n=t.getContext("2d"),r=t.width,s=t.height,o=r*W;console.log("canvas: (".concat(r,":").concat(s,")"));var a="sans-serif",i=r/38;n.font="".concat(i,"px ").concat(a),console.log("clearing canvas"),n.clearRect(0,0,r,s),console.log("drawing working area"),this.drawArea(t,n,r/2,s/2,e*o/K),console.log("drawing coordinate lines"),this.drawLines(n,r/2,s/2,r),console.log("drawing direction arrows"),this.drawSignedArrows(n,r/2,s/2,o/20),console.log("drawing notches"),console.log("drawing horizontal notches");for(var c=-4;c<=4;c+=.5){var l=s/2+o,u=2*o/8;0!==c&&this.drawSignedHorizontalNotch(n,r/2,l-(K+c)*u,o/20,c+"")}console.log("drawing vertical notches");for(var d=-4;d<=4;d+=.5){var h=r/2-o,g=2*o/8;this.drawSignedVerticalNotch(n,h+(K+d)*g,s/2,o/20,d+"")}console.log("basic drew")},redraw:function(e){!e||e<=0?this.tempdraw("R"):this.basedraw(e)},testX:function(e){return console.log("x values: ".concat(this.xValues)),this.xValues.includes(e)},testY:function(e){var t=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,n=parseFloat(e);console.log("parsed value: ".concat(n));var r=t.test(e);console.log("float?: ".concat(r)),console.log("not NaN?: ".concat(!isNaN(n)));var s=n<=this.yMaximum-Number.EPSILON;console.log("less?: ".concat(s));var o=n>=this.yMinimal+Number.EPSILON;return console.log("more?: ".concat(o)),r&&!isNaN(n)&&s&&o},testR:function(e){return console.log("r values: ".concat(this.rValues)),this.rValues.includes(e)},fetchToken:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,s,o,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("fetching tokens from server..."),e.next=3,fetch(this.queries.refresh,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({refreshToken:this.$session.get(this.refresh)})});case 3:if(n=e.sent,console.log("check if response is ok"),!n.ok){e.next=14;break}return console.log("successful fetching new token"),console.log("getting json object..."),e.next=10,n.json();case 10:if(r=e.sent,r){for(this.$session.set(this.access,r.accessToken),window.location.reload(),t=t.bind(this),console.log("repeating losed operation..."),s=i.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=i[a];t(o)}else console.error("empty response body");e.next=17;break;case 14:console.error("bad response ".concat(n.status," ").concat(n.statusText)),console.log("redirecting to login-page..."),this.signout();case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),fetchResult:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("provided valid data"),console.log("new result is ready to send: ".concat(this.result)),console.log("sending data..."),e.next=5,fetch(this.queries.add,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",shell_token:this.$session.get(this.access)},body:JSON.stringify(this.result)});case 5:if(t=e.sent,console.log("request sent -- checking if response is ok (201)"),201!==t.status){e.next=37;break}return console.log("response is ok (201 created)"),console.log("getting respond object from the server..."),e.prev=10,e.next=13,t.json();case 13:if(n=e.sent,!n){e.next=24;break}if(r=n.hit,void 0===r||null===r){e.next=21;break}console.log("query evaluation finished"),this.results=this.results.concat([{x:this.result.x,y:this.result.y,r:this.result.r,hit:r}]),e.next=22;break;case 21:throw new Error('bad repond object [field "hit" not provided]');case 22:e.next=26;break;case 24:s=new Error("bad respond object [provided empty result]"),s.data=n;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](10),console.error(e.t0),console.error("bad respond object: ".concat(e.t0.data));case 32:return e.prev=32,console.log("fetching new result finished"),e.finish(32);case 35:e.next=45;break;case 37:if("403"!=t.status){e.next=44;break}return console.error("access token expired"),console.log("fetching new token pair..."),e.next=42,this.fetchToken(this.fetchResult);case 42:e.next=45;break;case 44:console.error("bad response ".concat(t.statusText," : ").concat(t.status));case 45:console.log("response status: ".concat(t.status));case 46:case"end":return e.stop()}}),e,this,[[10,28,32,35]])})));function t(){return e.apply(this,arguments)}return t}(),drawDots:function(e){if(4!=this.counter&&(this.counter+=1),this.redraw(this.radius),console.log("previous results: ".concat(e)),e.length){for(var t=this.$refs.area,n=t.getContext("2d"),r=t.width,s=t.height,o=this.counter,a=e.length-1;a>=0;--a)if(e[a].r==this.radius){if(0===o--)break;console.log("putting dot: ".concat(e[a])),console.log("x: ".concat(e[a].x,"; y: ").concat(e[a].y)),n.fillStyle=e[a].hit?"#000000":"#cd0000",n.globalAlpha=1-1/o+1,console.log("counter: ".concat(o,"; alpha set to: ").concat(n.globalAlpha)),console.log("translating coordinates");var i=this.translateFrom(e[a].x,r,K,W),c=this.translateFrom(-e[a].y,s,K,W);console.log("translated: x: ".concat(i," y: ").concat(c)),console.log("putting dots"),n.beginPath(),n.arc(i,c,r*W/100,0,2*Math.PI,!0),n.fill(),n.stroke(),n.closePath(),n.globalAlpha=1,console.log("counter: ".concat(o,"; alpha restored to: ").concat(n.globalAlpha))}}else console.log("no any results in the table")},drawDot:function(e){console.log("previous result: ".concat(e)),console.log("preparing canvas variables...");var t=this.$refs.area,n=t.getContext("2d"),r=t.width,s=t.height;console.log("checking if more than ".concat(this.out," dots drawn")),this.counter||(console.log("redrawing canvas..."),this.redraw(e.r)),console.log("dot.x: ".concat(e.x,"; dot.y: ").concat(e.y)),n.fillStyle=e.hit?"#000000":"#cd0000",console.log("translating dot coordinates");var o=this.translateFrom(e.x,r,K,W),a=this.translateFrom(-e.y,s,K,W);console.log("dot coordinates translated to (x: ".concat(o,"; y: ").concat(a,")")),console.log("putting dot..."),n.beginPath(),n.arc(o,a,r*W/100,0,2*Math.PI,!0),n.fill(),n.stroke(),n.closePath(),console.log("dot put -- decrease counter"),this.counter=(this.counter+1)%5},check:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n="",console.log("--- x testing ---"),this.testX(this.result.x)||(n+=this.$refs.x.title+";\n"),console.log("--- y testing ---"),this.testY(this.result.y)||(n+=this.$refs.y.title+";\n"),console.log("--- r testing ---"),this.testR(this.result.r)||(n+=this.$refs.r.title+";\n"),console.log("=== total testing ==="),!n.length){e.next=13;break}console.error("Errors[".concat(n.length,"]: ").concat(n)),alert(n),e.next=16;break;case 13:return console.log("fetching new result..."),e.next=16,this.fetchResult();case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkArea:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r,s,o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("current radius: ".concat(this.result.r)),console.log("check if radius set"),this.result.r){e.next=7;break}console.log("radius not set"),alert("Не установлено свойство радиуса области"),e.next=34;break;case 7:if(this.testR(this.result.r)){e.next=12;break}console.log("invalid radius value"),alert(this.$refs.r.title),e.next=34;break;case 12:return console.log("valid radius value"),n=this.$refs.area,r=n.getBoundingClientRect(),console.log("canvas: (".concat(n.width,":").concat(n.height,")")),console.log("getting x coordinate"),s=t.clientX-r.left,console.log("mouse x: ".concat(s)),console.log("translating to x value"),o=this.translateTo(s,n.width,K,W),console.log("x translated to: ".concat(o)),this.result.x=o,console.log("getting y coordinate"),a=t.clientY-r.top,console.log("mouse y: ".concat(a)),console.log("translating to y value"),i=-this.translateTo(a,n.height,K,W),console.log("y translated to: ".concat(i)),this.result.y=i,console.log("fetching new result"),e.next=33,this.fetchResult();case 33:this.drawDots(this.results);case 34:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),signout:function(e){console.log("close current session..."),this.$session.clear(),window.location.reload()},retrieve:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getting results with unique token..."),e.next=3,fetch(this.queries.retrieve,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",shell_token:this.$session.get(this.access)},body:JSON.stringify(this.accessToken)});case 3:if(t=e.sent,console.log("check if response is ok"),!t.ok){e.next=14;break}return console.log("response is ok"),console.log("getting the json object..."),e.next=10,t.json();case 10:n=e.sent,this.results=n,e.next=21;break;case 14:if("403"!=t.status){e.next=20;break}return console.log("access token expired..."),e.next=18,this.fetchToken(this.retrieve);case 18:e.next=21;break;case 20:console.error("bad response ".concat(t.status," ").concat(t.statusText));case 21:this.isLoading=!1;case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createExitButton:function(){var e=document.createElement("BUTTON");e.innerHTML="Выйти",e.setAttribute("class","btn logo_btn"),e.onclick=this.signout;var t=document.getElementById("logo_btn");t.appendChild(e)}},mounted:function(){this.createExitButton(),this.retrieve(),this.redraw(this.radius)},watch:{radius:function(e){this.counter=-1,this.drawDots(this.results)}}},ee=Z,te=(n("61e5"),Object(c["a"])(ee,V,M,!1,null,null,null)),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"basement"}})},se=[],oe=(n("cb3d"),{}),ae=Object(c["a"])(oe,re,se,!1,null,null,null),ie=ae.exports,ce={name:"app",components:{logo:d,startup:z,basic:ne,hat:S,basement:ie},data:function(){return{accessTokenName:"accessToken",refreshTokenName:"refreshToken"}},computed:{access:function(){return this.$session.get(this.accessTokenName)},refresh:function(){return this.$session.get(this.refreshTokenName)},isAuthorized:function(){return!(void 0===this.access||null===this.access||""===this.access)}}},le=ce,ue=(n("034f"),Object(c["a"])(le,s,o,!1,null,null,null)),de=ue.exports,he=n("7207"),ge=n.n(he);r["a"].config.productionTip=!1,r["a"].use(ge.a),new r["a"]({render:function(e){return e(de)}}).$mount("#app")},"61e5":function(e,t,n){"use strict";n("2c2c")},"6d0b":function(e,t,n){},"702a":function(e,t,n){},"85ec":function(e,t,n){},beb9:function(e,t,n){},c021:function(e,t,n){"use strict";n("e0ca")},c0b1:function(e,t,n){"use strict";n("702a")},c5b8:function(e,t,n){"use strict";n("6d0b")},cb3d:function(e,t,n){"use strict";n("beb9")},d487:function(e,t,n){"use strict";n("2125")},def8:function(e,t,n){},e0ca:function(e,t,n){},ebbf:function(e,t,n){"use strict";n("fe67")},f482:function(e,t,n){"use strict";n("def8")},fe67:function(e,t,n){}});
//# sourceMappingURL=app.4d2be628.js.map